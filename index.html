<!doctype html>
<html lang="eu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Taula periodikoa â€” Onddi Akademia</title>

<!-- Fuente Arista 2.0 Alternate -->
<style>
@font-face {
  font-family: 'Arista 2.0 Alternate';
  src: url('https://raw.githubusercontent.com/Mikelikoptero/Taularako-argazkiak/main/AristaAlternate/Arista2.0Alternate.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}
</style>

<style>
/* Variables para modo claro / oscuro */
:root {
  --panel-width: 360px;
  --cell-size: 72px;
  --gap-size: 6px;
  --bg: #0a0a0a;
  --panel-bg: linear-gradient(180deg,#0a0a0a,#111111);
  --text: #e6e6e6;
  --text-muted: #cccccc;
  --border: rgba(58,121,94,0.3);
  --accent: #3A795E;
  --card-bg: linear-gradient(180deg,#111111,#0d0d0d);
  --legend-bg: rgba(58,121,94,0.08);
  --shadow: 0 10px 30px rgba(0,0,0,0.8);
  --placeholder-border: rgba(58,121,94,0.3);
  --placeholder-text: rgba(204,204,204,0.6);
  --cell-bg: rgba(30,30,30,0.8);
  --cell-border: rgba(58,121,94,0.1);
  --search-bg: linear-gradient(180deg,#111111,#0d0d0d);
  --search-border: rgba(58,121,94,0.3);
  --search-focus: rgba(58,121,94,0.6);
  --zoom-bg: rgba(17,17,17,0.9);
  --zoom-border: rgba(58,121,94,0.3);
  --zoom-btn-bg: rgba(58,121,94,0.2);
  --zoom-btn-hover: rgba(58,121,94,0.4);
  --tooltip-bg: linear-gradient(180deg, #1a1a1a, #252525);
  --tooltip-border: rgba(58,121,94,0.4);
  --tooltip-text: #e6e6e6;
  --group-period-bg: rgba(58,121,94,0.1);
  --group-period-highlight: rgba(58,121,94,0.3);
  --group-period-text: rgba(204,204,204,0.8);
  --group-period-highlight-text: #e6e6e6;
  --btn-bg: #0a0a0a;
  --btn-border: #3A795E;
  --btn-text: #cccccc;
  --btn-hover-bg: #3A795E;
  --btn-hover-text: #ffffff;
  --btn-shadow: 0 2px 8px rgba(58,121,94,0.2);
  --btn-hover-shadow: 0 4px 12px rgba(58,121,94,0.4);
  --btn-active-shadow: 0 2px 6px rgba(58,121,94,0.3);
  --link-color: #e6e6e6;
  --link-hover: #e6e6e6;
  --zoom-level: 0.75;
}

[data-theme="light"] {
  --bg: #f5f7fa;
  --panel-bg: linear-gradient(180deg,#ffffff,#f0f4f8);
  --text: #222;
  --text-muted: #445;
  --border: rgba(58,121,94,0.25);
  --accent: #3A795E;
  --card-bg: linear-gradient(180deg,#ffffff,#f6f9fc);
  --legend-bg: rgba(58,121,94,0.1);
  --shadow: 0 10px 30px rgba(0,0,0,0.1);
  --placeholder-border: rgba(58,121,94,0.25);
  --placeholder-text: rgba(68,68,68,0.7);
  --cell-bg: rgba(240,240,240,0.9);
  --cell-border: rgba(58,121,94,0.15);
  --search-bg: linear-gradient(180deg,#ffffff,#f6f9fc);
  --search-border: rgba(58,121,94,0.3);
  --search-focus: rgba(58,121,94,0.6);
  --zoom-bg: rgba(255,255,255,0.9);
  --zoom-border: rgba(58,121,94,0.3);
  --zoom-btn-bg: rgba(58,121,94,0.1);
  --zoom-btn-hover: rgba(58,121,94,0.3);
  --tooltip-bg: linear-gradient(180deg, #ffffff, #f0f4f8);
  --tooltip-border: rgba(58,121,94,0.4);
  --tooltip-text: #222;
  --group-period-bg: rgba(58,121,94,0.1);
  --group-period-highlight: rgba(58,121,94,0.3);
  --group-period-text: rgba(68,68,68,0.8);
  --group-period-highlight-text: #222;
  --btn-bg: #ffffff;
  --btn-border: #3A795E;
  --btn-text: #445;
  --btn-hover-bg: #3A795E;
  --btn-hover-text: #ffffff;
  --btn-shadow: 0 2px 8px rgba(58,121,94,0.1);
  --btn-hover-shadow: 0 4px 12px rgba(58,121,94,0.2);
  --btn-active-shadow: 0 2px 6px rgba(58,121,94,0.15);
  --link-color: #222;
  --link-hover: #222;
}

body {
  background: var(--bg);
  color: var(--text);
  margin: 0;
  font-family: Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  overflow: hidden;
}

.app {
  display: flex;
  height: 100vh;
  width: 100vw;
}

.panel {
  width: var(--panel-width);
  min-width: var(--panel-width);
  background: var(--panel-bg);
  padding: 20px;
  border-right: 1px solid var(--border);
  overflow: auto;
  flex-shrink: 0;
}

.onddi-title {
  font-family: 'Arista 2.0 Alternate', sans-serif;
  font-size: 32px;
  font-weight: 700;
  color: var(--accent);
  text-align: center;
  margin: 0 0 25px 0;
  letter-spacing: 1px;
}

.card {
  background: var(--card-bg);
  padding: 14px;
  border-radius: 8px;
  border: 1px solid var(--border);
}

.big-square {
  width: 84px;
  height: 84px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 40px;
  margin-right: 14px;
  color: #000 !important;
}

.info-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.info-left {
  display: flex;
  align-items: center;
}

.info-rows {
  margin-top: 12px;
}

.info-rows div {
  margin: 8px 0;
}

.info-rows b {
  display: inline-block;
  width: 170px;
  color: var(--text-muted);
}

.small-muted {
  font-size: 12px;
  opacity: 0.8;
  color: var(--text-muted);
}

.footer {
  margin-top: 12px;
  font-size: 12px;
  opacity: 0.7;
  color: var(--text-muted);
}

/* --- Recursos --- */
.resources-toggle {
  background: var(--legend-bg);
  border-radius: 8px;
  padding: 12px;
  margin: 10px 0;
  border: 1px solid var(--border);
  cursor: pointer;
  transition: all 0.3s ease;
}

.resources-toggle:hover {
  background: rgba(58,121,94,0.12);
}

.resources-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.resources-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-muted);
  margin: 0;
}

.resources-icon {
  transition: transform 0.3s ease;
  color: var(--accent);
  font-weight: bold;
}

.resources-toggle.active .resources-icon {
  transform: rotate(180deg);
}

.resources-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.resources-toggle.active .resources-content {
  max-height: 500px;
}

.resources-content-inner {
  padding-top: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* --- Botones --- */
.btn-3d, .btn-balents, .btn-compounds, .btn-calc {
  background: var(--btn-bg) !important;
  border: 2px solid var(--btn-border) !important;
  color: var(--btn-text) !important;
  padding: 10px 16px !important;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin: 0 !important;
  width: 100% !important;
  min-width: auto !important;
  box-shadow: var(--btn-shadow);
}

.btn-3d:hover, .btn-balents:hover, .btn-compounds:hover, .btn-calc:hover {
  background: var(--btn-hover-bg) !important;
  color: var(--btn-hover-text) !important;
  transform: translateY(-2px);
  box-shadow: var(--btn-hover-shadow);
}

.btn-3d:active, .btn-balents:active, .btn-compounds:active, .btn-calc:active {
  transform: translateY(0);
  box-shadow: var(--btn-active-shadow);
}

/* --- Leyendas --- */
.elec-legend, .electroneg-legend, .radius-legend, .ionization-legend {
  background: var(--legend-bg);
  border-radius: 8px;
  padding: 12px;
  border: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
}

.elec-legend-header, .electroneg-legend-header, .radius-legend-header, .ionization-legend-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.elec-legend-title, .electroneg-legend-title, .radius-legend-title, .ionization-legend-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-muted);
  margin: 0;
}

.title-tooltip {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: rgba(58,121,94,0.15);
  border: 1px solid rgba(58,121,94,0.3);
  color: var(--text-muted);
  font-size: 11px;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: help;
  transition: all 0.2s ease;
}

.tooltip-content {
  position: absolute;
  top: 100%;
  left: 0;
  background: var(--tooltip-bg);
  border: 1px solid var(--tooltip-border);
  border-radius: 6px;
  padding: 8px 10px;
  font-size: 11px;
  line-height: 1.3;
  color: var(--tooltip-text);
  width: 200px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.5);
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-8px);
  transition: all 0.25s ease;
  pointer-events: none;
}

.electroneg-legend-title:hover .tooltip-content,
.radius-legend-title:hover .tooltip-content,
.ionization-legend-title:hover .tooltip-content {
  opacity: 1;
  visibility: visible;
  transform: translateY(3px);
}

.tooltip-content strong {
  color: #98FB98;
  display: block;
  margin-bottom: 3px;
  font-size: 11px;
  white-space: nowrap;
}

/* --- Controles de zoom --- */
.zoom-controls {
  position: fixed;
  top: 20px;
  right: 20px;
  background: var(--zoom-bg);
  border-radius: 8px;
  padding: 10px;
  display: flex;
  gap: 8px;
  z-index: 1000;
  backdrop-filter: blur(5px);
  border: 1px solid var(--zoom-border);
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
}

.zoom-btn {
  background: var(--zoom-btn-bg);
  border: none;
  color: var(--text);
  width: 36px;
  height: 36px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 18px;
  font-weight: bold;
  transition: all 0.2s ease;
}

.zoom-btn:hover {
  background: var(--zoom-btn-hover);
  transform: scale(1.05);
}

.zoom-display {
  color: var(--text);
  font-size: 14px;
  display: flex;
  align-items: center;
  padding: 0 8px;
  min-width: 60px;
  justify-content: center;
  font-weight: 600;
}

/* --- Contenedor principal --- */
.container {
  flex: 1;
  padding: 16px;
  display: flex;
  flex-direction: column;
  overflow: auto;
  min-width: 0;
  align-items: flex-start;
  justify-content: flex-start;
}

.table-complete-wrapper {
  transform: scale(var(--zoom-level));
  transform-origin: top left;
  transition: transform 0.3s ease;
  min-width: calc((var(--cell-size) * 18) + (var(--gap-size) * 17) + 28px + 30px);
  display: flex;
  flex-direction: column;
  gap: 10px;
  position: relative;
}

.periodic {
  display: grid;
  grid-template-columns: repeat(18, var(--cell-size));
  grid-auto-rows: var(--cell-size);
  gap: var(--gap-size);
  background: var(--card-bg);
  padding: 14px;
  border-radius: 8px;
  box-shadow: var(--shadow);
  border: 1px solid var(--border);
  position: relative;
}

.bottom-series-container {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
  align-items: flex-start;
  margin-left: 0;
  padding-left: 0;
}

.bottom-series {
  display: grid;
  grid-template-columns: repeat(15, var(--cell-size));
  grid-auto-rows: var(--cell-size);
  gap: var(--gap-size);
  background: var(--card-bg);
  padding: 14px;
  border-radius: 8px;
  box-shadow: var(--shadow);
  border: 1px solid var(--border);
  margin-left: calc(44px + 8px + (var(--cell-size) * 2) + (var(--gap-size) * 2));
  width: calc((var(--cell-size) * 15) + (var(--gap-size) * 14) + 28px);
}

.cell {
  background: var(--cell-bg);
  border-radius: 6px;
  padding: 6px;
  color: var(--text);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  font-size: 12px;
  border: 1px solid var(--cell-border);
  cursor: pointer;
  transition: all 0.3s ease;
  width: var(--cell-size);
  height: var(--cell-size);
  box-sizing: border-box;
}

.cell .num {
  font-size: 11px;
  opacity: 0.85;
}

.cell .sym {
  font-size: 26px;
  font-weight: 400;
  line-height: 1;
  letter-spacing: -0.02em;
  margin: 0;
  display: block;
  text-align: center;
}

.cell .ename {
  font-size: 11px;
  opacity: 0.95;
  line-height: 1.05;
  margin-top: 3px;
  font-weight: 600;
  font-stretch: condensed;
  letter-spacing: -0.02em;
  text-align: center;
}

.cell:hover {
  transform: translateY(-4px) scale(1.05);
  box-shadow: 0 8px 24px rgba(58,121,94,0.4);
  border-color: rgba(58,121,94,0.3);
}

.cell.dimmed {
  opacity: 0.3;
  transform: scale(0.95);
  filter: grayscale(0.7);
}

.cell.highlighted {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(58,121,94,0.5);
  z-index: 10;
  border-color: rgba(58,121,94,0.4);
}

.cell.search-match {
  transform: scale(1.08);
  box-shadow: 0 0 25px rgba(58,121,94,0.7);
  z-index: 20;
  border: 2px solid var(--accent);
}

.cell.search-nomatch {
  opacity: 0.2;
  filter: grayscale(0.8);
  transform: scale(0.9);
}

.placeholder-cell {
  background: transparent;
  border: 2px dashed var(--placeholder-border);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--placeholder-text);
  font-size: 14px;
  font-weight: 600;
  width: var(--cell-size);
  height: var(--cell-size);
  box-sizing: border-box;
}

/* --- Grupos y periodos --- */
.groups-container {
  display: grid;
  grid-template-columns: repeat(18, var(--cell-size));
  gap: var(--gap-size);
  margin-bottom: 10px;
  padding: 0 20px;
  margin-left: 44px;
}

.group-label {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
  color: var(--group-period-text);
  background: var(--group-period-bg);
  border-radius: 4px;
  padding: 4px;
  min-height: 30px;
  transition: all 0.3s ease;
}

.group-label.highlighted {
  background: var(--group-period-highlight);
  color: var(--group-period-highlight-text);
  box-shadow: 0 0 10px rgba(58,121,94,0.5);
  transform: scale(1.05);
}

.period-label {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
  color: var(--group-period-text);
  background: var(--group-period-bg);
  border-radius: 4px;
  padding: 4px;
  min-width: 30px;
  height: var(--cell-size);
  transition: all 0.3s ease;
}

.period-label.highlighted {
  background: var(--group-period-highlight);
  color: var(--group-period-highlight-text);
  box-shadow: 0 0 10px rgba(58,121,94,0.5);
  transform: scale(1.05);
}

.table-with-periods {
  display: grid;
  grid-template-columns: 30px 1fr;
  gap: var(--gap-size);
  padding: 0 14px;
}

.periods-column {
  display: grid;
  grid-template-rows: repeat(7, var(--cell-size));
  gap: var(--gap-size);
  margin-top: 14px;
}

/* --- Colores de categorÃ­as --- */
.alkali { background: #FFB6C1 !important; color: #333; }
.alkaline { background: #FFD8B1 !important; color: #333; }
.lanthanide { background: #C9E4DE !important; color: #333; }
.actinide { background: #D8BFD8 !important; color: #333; }
.transition { background: #B0E0E6 !important; color: #333; }
.post-transition { background: #E6E6FA !important; color: #333; }
.metalloid { background: #98FB98 !important; color: #333; }
.nonmetal { background: #F0E68C !important; color: #333; }
.halogen { background: #FFDEAD !important; color: #333; }
.noble { background: #DDA0DD !important; color: #333; }
.other { background: #F5F5F5 !important; color: #333; }

/* --- Enlaces --- */
.element-name-link {
  color: var(--link-color) !important;
  text-decoration: none !important;
  font-weight: 600;
}

.element-name-link:hover,
.element-name-link:focus,
.element-name-link:active,
.element-name-link:visited {
  color: var(--link-hover) !important;
  text-decoration: none !important;
}

#titleMain {
  color: var(--text) !important;
}

#titleMain a {
  color: var(--link-color) !important;
  text-decoration: none !important;
}

/* --- Search --- */
.search-container {
  margin-bottom: 20px;
  padding: 0 16px;
  width: 100%;
  max-width: 800px;
}

.search-box {
  width: 100%;
  padding: 14px 18px;
  background: var(--search-bg);
  border: 1px solid var(--search-border);
  border-radius: 10px;
  color: var(--text);
  font-size: 16px;
  outline: none;
  transition: all 0.3s ease;
}

.search-box:focus {
  border-color: var(--search-focus);
  box-shadow: 0 0 15px rgba(58,121,94,0.3);
  transform: translateY(-2px);
}

.search-box::placeholder {
  color: var(--text-muted);
  font-size: 15px;
}

/* --- Tendencias --- */
.trend-arrows {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 50;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.trend-arrows.active {
  opacity: 1;
}

.trend-arrow {
  position: absolute;
  font-size: 24px;
  font-weight: bold;
  text-shadow: 0 0 10px rgba(152, 251, 152, 0.7);
  animation: pulse 2s infinite;
}

.trend-arrow.radius {
  color: #98FB98;
}

.trend-arrow.electroneg {
  color: #87CEEB;
}

.trend-arrow.ionization {
  color: #FF6B6B;
  text-shadow: 0 0 10px rgba(255, 107, 107, 0.7);
}

.trend-arrow.down {
  transform: rotate(0deg);
}

.trend-arrow.up {
  transform: rotate(180deg);
}

.trend-arrow.left {
  transform: rotate(-90deg);
}

.trend-arrow.right {
  transform: rotate(90deg);
}

@keyframes pulse {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}
</style>
</head>
<body>
<div class="app">
  <aside class="panel">
    <div class="onddi-title">ONDDI AKADEMIA</div>

    <div class="resources-toggle" id="resourcesToggle">
      <div class="resources-header">
        <div class="resources-title">Baliabideak</div>
        <div class="resources-icon">â–¼</div>
      </div>
      <div class="resources-content">
        <div class="resources-content-inner">
          <button class="btn-3d" id="btn3D">3D Orbitalak</button>
          <button class="btn-balents" id="btnBalents">Balentziak</button>
          <button class="btn-compounds" id="btnCompounds">Konposatu Inorganikoak</button>
          <button class="btn-calc" id="btnCalc">Kalkulu Tresnak</button>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="info-head">
        <div class="info-left">
          <div id="iconSquare" class="big-square" style="background:#111111">â€”</div>
          <div>
            <div id="titleMain" style="font-size:20px;font-weight:700">Aukeratu elementu bat</div>
            <div id="subtitle" class="small-muted">Z = â€”</div>
          </div>
        </div>
      </div>
      <div class="info-rows">
        <div><b>Zenbaki atomikoa:</b> <span id="iz">â€”</span></div>
        <div><b>Masa molarra (u):</b> <span id="imass">â€”</span></div>
        <div><b>Balentziak:</b> <span id="ival">â€”</span></div>
        <div><b>Konfigurazio elektronikoa:</b> <span id="iconfig">â€”</span></div>
        <div><b>Elektronegatibitatea:</b> <span id="ielectroneg">â€”</span></div>
        <div><b>Erradio atomikoa (pm):</b> <span id="iradius">â€”</span></div>
        <div><b>Ionizazio energia (kJ/mol):</b> <span id="iionization">â€”</span></div>
      </div>
      <div class="footer">Taula periodikoko datu orokorrak.</div>
    </div>

    <div class="elec-legend" id="elecLegend">
      <div class="elec-legend-header">
        <div class="elec-legend-title">Orbital atomikoak</div>
        <button class="elec-toggle-btn" id="elecToggleBtn"></button>
      </div>
      <div class="elec-legend-items">
        <div class="elec-legend-item"><div class="elec-legend-color" style="background: #FFB6C1"></div><span>s</span></div>
        <div class="elec-legend-item"><div class="elec-legend-color" style="background: #B19CD9"></div><span>p</span></div>
        <div class="elec-legend-item"><div class="elec-legend-color" style="background: #87CEEB"></div><span>d</span></div>
        <div class="elec-legend-item"><div class="elec-legend-color" style="background: #FFDAC1"></div><span>f</span></div>
      </div>
    </div>

    <div class="properties-toggle" id="propertiesToggle">
      <div class="properties-header">
        <div class="properties-title">Propietateak</div>
        <div class="properties-icon">â–¼</div>
      </div>
      <div class="properties-content">
        <div class="properties-content-inner">
          <div class="electroneg-legend" id="electronegLegend">
            <div class="electroneg-legend-header">
              <div class="electroneg-legend-title">
                Elektronegatibitatea
                <div class="title-tooltip">?</div>
                <div class="tooltip-content"><strong>Elektronegatibitatearen joera</strong><br>Gezien norantzan handitu</div>
              </div>
              <button class="electroneg-toggle-btn" id="electronegToggleBtn"></button>
            </div>
            <div class="electroneg-legend-gradient"><span>Txikia</span><div class="electroneg-gradient-bar"></div><span>Handia</span></div>
          </div>

          <div class="radius-legend" id="radiusLegend">
            <div class="radius-legend-header">
              <div class="radius-legend-title">
                Erradio atomikoak
                <div class="title-tooltip">?</div>
                <div class="tooltip-content"><strong>Erradioaren joera</strong><br>Gezien norantzan handitu</div>
              </div>
              <button class="radius-toggle-btn" id="radiusToggleBtn"></button>
            </div>
            <div class="radius-legend-gradient"><span>Txikia</span><div class="radius-gradient-bar"></div><span>Handia</span></div>
          </div>

          <div class="ionization-legend" id="ionizationLegend">
            <div class="ionization-legend-header">
              <div class="ionization-legend-title">
                Ionizazio energia
                <div class="title-tooltip">?</div>
                <div class="tooltip-content"><strong>Ionizazio energiaren joera</strong><br>Gezien norantzan handitu</div>
              </div>
              <button class="ionization-toggle-btn" id="ionizationToggleBtn"></button>
            </div>
            <div class="ionization-legend-gradient"><span>Txikia</span><div class="ionization-gradient-bar"></div><span>Handia</span></div>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <main class="container">
    <div class="search-container">
      <input type="text" class="search-box" id="searchInput" placeholder="Bilatu elementua... (izenaz, sinboloaz edo zenbaki atomikoaz)">
    </div>

    <div class="table-complete-wrapper">
      <div class="trend-arrows" id="trendArrows"></div>

      <div class="groups-container">
        <!-- 1 al 18 -->
        <div class="group-label">1</div><div class="group-label">2</div><div class="group-label">3</div>
        <div class="group-label">4</div><div class="group-label">5</div><div class="group-label">6</div>
        <div class="group-label">7</div><div class="group-label">8</div><div class="group-label">9</div>
        <div class="group-label">10</div><div class="group-label">11</div><div class="group-label">12</div>
        <div class="group-label">13</div><div class="group-label">14</div><div class="group-label">15</div>
        <div class="group-label">16</div><div class="group-label">17</div><div class="group-label">18</div>
      </div>

      <div class="table-with-periods">
        <div class="periods-column">
          <div class="period-label">1</div><div class="period-label">2</div><div class="period-label">3</div>
          <div class="period-label">4</div><div class="period-label">5</div><div class="period-label">6</div>
          <div class="period-label">7</div>
        </div>
        <div class="periodic" id="table"></div>
      </div>

      <div class="bottom-series-container">
        <div class="bottom-series" id="lanthanides"></div>
        <div class="bottom-series" id="actinides"></div>
      </div>
    </div>
  </main>
</div>

<div class="zoom-controls">
  <button class="zoom-btn" id="zoomOut">âˆ’</button>
  <div class="zoom-display" id="zoomLevel">100%</div>
  <button class="zoom-btn" id="zoomIn">+</button>
  <button class="zoom-btn" id="zoomReset">â†º</button>
  <button class="zoom-btn" id="themeToggle" title="Kolorea Aldatu">ðŸŒ“</button>
</div>

<script>
/* ---------- DATOS ---------- */
const elements = [
  {z:1,sym:'H',name:'Hidrogeno',mass:1.008,val:[-1,1],config:'1s1',group:'nonmetal',x:1,y:1,radius:53,electroneg:2.20,ionization:1312},
  {z:2,sym:'He',name:'Helio',mass:4.0026,val:[0],config:'1s2',group:'noble',x:18,y:1,radius:31,electroneg:0,ionization:2372},
  {z:3,sym:'Li',name:'Litio',mass:6.94,val:[1],config:'[He] 2s1',group:'alkali',x:1,y:2,radius:167,electroneg:0.98,ionization:520},
  {z:4,sym:'Be',name:'Berilio',mass:9.0122,val:[2],config:'[He] 2s2',group:'alkaline',x:2,y:2,radius:112,electroneg:1.57,ionization:899},
  {z:5,sym:'B',name:'Boro',mass:10.81,val:[3],config:'[He] 2s2 2p1',group:'metalloid',x:13,y:2,radius:87,electroneg:2.04,ionization:801},
  {z:6,sym:'C',name:'Karbono',mass:12.011,val:[-4,2,4],config:'[He] 2s2 2p2',group:'nonmetal',x:14,y:2,radius:67,electroneg:2.55,ionization:1086},
  {z:7,sym:'N',name:'Nitrogeno',mass:14.007,val:[-3,1,3,5],config:'[He] 2s2 2p3',group:'nonmetal',x:15,y:2,radius:56,electroneg:3.04,ionization:1402},
  {z:8,sym:'O',name:'Oxigeno',mass:15.999,val:[-2,-1],config:'[He] 2s2 2p4',group:'nonmetal',x:16,y:2,radius:48,electroneg:3.44,ionization:1314},
  {z:9,sym:'F',name:'Fluor',mass:18.998,val:[-1],config:'[He] 2s2 2p5',group:'halogen',x:17,y:2,radius:42,electroneg:3.98,ionization:1681},
  {z:10,sym:'Ne',name:'Neon',mass:20.180,val:[0],config:'[He] 2s2 2p6',group:'noble',x:18,y:2,radius:38,electroneg:0,ionization:2081},
  {z:11,sym:'Na',name:'Sodio',mass:22.990,val:[1],config:'[Ne] 3s1',group:'alkali',x:1,y:3,radius:190,electroneg:0.93,ionization:496},
  {z:12,sym:'Mg',name:'Magnesio',mass:24.305,val:[2],config:'[Ne] 3s2',group:'alkaline',x:2,y:3,radius:145,electroneg:1.31,ionization:738},
  {z:13,sym:'Al',name:'Aluminio',mass:26.982,val:[3],config:'[Ne] 3s2 3p1',group:'post-transition',x:13,y:3,radius:118,electroneg:1.61,ionization:577},
  {z:14,sym:'Si',name:'Silizio',mass:28.085,val:[-4,4],config:'[Ne] 3s2 3p2',group:'metalloid',x:14,y:3,radius:111,electroneg:1.90,ionization:786},
  {z:15,sym:'P',name:'Fosforo',mass:30.974,val:[-3,3,5],config:'[Ne] 3s2 3p3',group:'nonmetal',x:15,y:3,radius:98,electroneg:2.19,ionization:1012},
  {z:16,sym:'S',name:'Sufre',mass:32.06,val:[-2,2,4,6],config:'[Ne] 3s2 3p4',group:'nonmetal',x:16,y:3,radius:88,electroneg:2.58,ionization:1000},
  {z:17,sym:'Cl',name:'Kloro',mass:35.45,val:[-1,1,3,5,7],config:'[Ne] 3s2 3p5',group:'halogen',x:17,y:3,radius:79,electroneg:3.16,ionization:1251},
  {z:18,sym:'Ar',name:'Argon',mass:39.948,val:[0],config:'[Ne] 3s2 3p6',group:'noble',x:18,y:3,radius:71,electroneg:0,ionization:1521},
  {z:19,sym:'K',name:'Potasio',mass:39.098,val:[1],config:'[Ar] 4s1',group:'alkali',x:1,y:4,radius:243,electroneg:0.82,ionization:419},
  {z:20,sym:'Ca',name:'Kaltzio',mass:40.078,val:[2],config:'[Ar] 4s2',group:'alkaline',x:2,y:4,radius=194,electroneg:1.00,ionization:590},
  {z:21,sym:'Sc',name:'Eskandio',mass:44.956,val:[3],config:'[Ar] 3d1 4s2',group:'transition',x:3,y:4,radius:184,electroneg:1.36,ionization:631},
  {z:22,sym:'Ti',name:'Titanio',mass:47.867,val:[2,3,4],config:'[Ar] 3d2 4s2',group:'transition',x:4,y:4,radius:176,electroneg:1.54,ionization:658},
  {z:23,sym:'V',name:'Banadio',mass:50.942,val:[2,3,4,5],config:'[Ar] 3d3 4s2',group:'transition',x:5,y:4,radius:171,electroneg:1.63,ionization:650},
  {z:24,sym:'Cr',name:'Kromo',mass:51.996,val:[2,3,6],config:'[Ar] 3d5 4s1',group:'transition',x:6,y:4,radius:166,electroneg:1.66,ionization:653},
  {z:25,sym:'Mn',name:'Manganeso',mass:54.938,val:[2,3,4,6,7],config:'[Ar] 3d5 4s2',group:'transition',x:7,y:4,radius:161,electroneg:1.55,ionization:717},
  {z:26,sym:'Fe',name:'Burdin',mass:55.845,val:[2,3],config:'[Ar] 3d6 4s2',group:'transition',x:8,y:4,radius:156,electroneg:1.83,ionization:762},
  {z:27,sym:'Co',name:'Kobalto',mass:58.933,val:[2,3],config:'[Ar] 3d7 4s2',group:'transition',x:9,y:4,radius:152,electroneg:1.88,ionization:760},
  {z:28,sym:'Ni',name:'Nikel',mass:58.693,val:[2,3],config:'[Ar] 3d8 4s2',group:'transition',x:10,y:4,radius:149,electroneg:1.91,ionization:737},
  {z:29,sym:'Cu',name:'Kobre',mass:63.546,val:[1,2],config:'[Ar] 3d10 4s1',group:'transition',x:11,y:4,radius:145,electroneg:1.90,ionization:745},
  {z:30,sym:'Zn',name:'Zink',mass:65.38,val:[2],config:'[Ar] 3d10 4s2',group:'transition',x:12,y:4,radius:142,electroneg:1.65,ionization:906},
  {z:31,sym:'Ga',name:'Galio',mass:69.723,val:[3],config:'[Ar] 3d10 4s2 4p1',group:'post-transition',x:13,y:4,radius:136,electroneg:1.81,ionization:579},
  {z:32,sym:'Ge',name:'Germanio',mass:72.630,val:[4],config:'[Ar] 3d10 4s2 4p2',group:'metalloid',x:14,y:4,radius:125,electroneg:2.01,ionization:762},
  {z:33,sym:'As',name:'Artseniko',mass:74.922,val:[-3,3,5],config:'[Ar] 3d10 4s2 4p3',group:'metalloid',x:15,y:4,radius:114,electroneg:2.18,ionization:947},
  {z:34,sym:'Se',name:'Selenio',mass:78.971,val:[-2,2,4,6],config:'[Ar] 3d10 4s2 4p4',group:'nonmetal',x:16,y:4,radius:103,electroneg:2.55,ionization:941},
  {z:35,sym:'Br',name:'Bromo',mass:79.904,val:[-1,1,3,5,7],config:'[Ar] 3d10 4s2 4p5',group:'halogen',x:17,y:4,radius:94,electroneg:2.96,ionization:1140},
  {z:36,sym:'Kr',name:'Kripton',mass:83.798,val:[0,2],config:'[Ar] 3d10 4s2 4p6',group:'noble',x:18,y:4,radius:88,electroneg:3.00,ionization:1351},
  {z:37,sym:'Rb',name:'Rubidio',mass:85.468,val:[1],config:'[Kr] 5s1',group:'alkali',x:1,y:5,radius:265,electroneg:0.82,ionization:403},
  {z:38,sym:'Sr',name:'Estrontzio',mass=87.62,val:[2],config:'[Kr] 5s2',group:'alkaline',x:2,y:5,radius:219,electroneg:0.95,ionization:549},
  {z:39,sym:'Y',name:'Itrio',mass:88.906,val:[3],config:'[Kr] 4d1 5s2',group:'transition',x:3,y:5,radius:212,electroneg:1.22,ionization:600},
  {z:40,sym:'Zr',name:'Zirkonio',mass:91.224,val:[4],config:'[Kr] 4d2 5s2',group:'transition',x:4,y:5,radius:206,electroneg:1.33,ionization:640},
  {z:41,sym:'Nb',name:'Niobio',mass:92.906,val:[3,5],config:'[Kr] 4d4 5s1',group:'transition',x:5,y:5,radius:198,electroneg:1.6,ionization:652},
  {z:42,sym:'Mo',name:'Molibdeno',mass:95.95,val:[2,3,4,5,6],config:'[Kr] 4d5 5s1',group:'transition',x:6,y:5,radius:190,electroneg:2.16,ionization:684},
  {z:43,sym:'Tc',name:'Teknezio',mass:98,val:[4,7],config:'[Kr] 4d5 5s2',group:'transition',x:7,y:5,radius:183,electroneg:1.9,ionization:702},
  {z:44,sym:'Ru',name:'Rutenio',mass:101.07,val:[3,4,6,8],config:'[Kr] 4d7 5s1',group:'transition',x:8,y:5,radius:178,electroneg:2.2,ionization:710},
  {z:45,sym:'Rh',name:'Rodio',mass:102.91,val:[3,4],config:'[Kr] 4d8 5s1',group:'transition',x:9,y:5,radius:173,electroneg:2.28,ionization:720},
  {z:46,sym:'Pd',name:'Paladio',mass:106.42,val:[2,4],config:'[Kr] 4d10',group:'transition',x:10,y:5,radius:169,electroneg:2.20,ionization:804},
  {z:47,sym:'Ag',name:'Zilar',mass:107.87,val:[1],config:'[Kr] 4d10 5s1',group:'transition',x:11,y:5,radius:165,electroneg:1.93,ionization:731},
  {z:48,sym:'Cd',name:'Kadmio',mass:112.41,val:[2],config:'[Kr] 4d10 5s2',group:'transition',x:12,y:5,radius:161,electroneg:1.69,ionization:867},
  {z:49,sym:'In',name:'Indio',mass=114.82,val:[3],config:'[Kr] 4d10 5s2 5p1',group:'post-transition',x:13,y:5,radius:156,electroneg:1.78,ionization:558},
  {z:50,sym:'Sn',name:'Eztainu',mass:118.71,val:[2,4],config:'[Kr] 4d10 5s2 5p2',group:'post-transition',x:14,y:5,radius:145,electroneg:1.96,ionization:709},
  {z:51,sym:'Sb',name:'Antimonio',mass:121.76,val:[-3,3,5],config:'[Kr] 4d10 5s2 5p3',group:'metalloid',x:15,y:5,radius:133,electroneg:2.05,ionization:834},
  {z:52,sym:'Te',name:'Telurio',mass:127.60,val:[-2,2,4,6],config:'[Kr] 4d10 5s2 5p4',group:'metalloid',x:16,y:5,radius:123,electroneg:2.1,ionization:869},
  {z:53,sym:'I',name:'Iodo',mass:126.90,val:[-1,1,3,5,7],config:'[Kr] 4d10 5s2 5p5',group:'halogen',x:17,y:5,radius:115,electroneg:2.66,ionization:1008},
  {z:54,sym:'Xe',name:'Xenon',mass:131.29,val:[0,2,4,6,8],config:'[Kr] 4d10 5s2 5p6',group:'noble',x:18,y:5,radius:108,electroneg:2.6,ionization:1170},
  {z:55,sym:'Cs',name:'Zesio',mass:132.91,val:[1],config:'[Xe] 6s1',group:'alkali',x:1,y:6,radius:298,electroneg:0.79,ionization:376},
  {z:56,sym:'Ba',name:'Bario',mass:137.33,val:[2],config:'[Xe] 6s2',group:'alkaline',x:2,y:6,radius:253,electroneg:0.89,ionization:503},
  {z:72,sym:'Hf',name:'Hafnio',mass:178.49,val:[4],config:'[Xe] 4f14 5d2 6s2',group:'transition',x:4,y:6,radius:208,electroneg:1.3,ionization:658},
  {z:73,sym:'Ta',name:'Tantalo',mass:180.95,val:[5],config:'[Xe] 4f14 5d3 6s2',group:'transition',x:5,y:6,radius:200,electroneg:1.5,ionization:761},
  {z:74,sym:'W',name:'Wolfram',mass:183.84,val:[4,6],config:'[Xe] 4f14 5d4 6s2',group:'transition',x:6,y:6,radius:193,electroneg:2.36,ionization:770},
  {z:75,sym:'Re',name:'Renio',mass:186.21,val:[-1,2,4,6,7],config:'[Xe] 4f14 5d5 6s2',group:'transition',x:7,y:6,radius:188,electroneg:1.9,ionization:760},
  {z:76,sym:'Os',name:'Osmio',mass:190.23,val:[2,3,4,6,8],config:'[Xe] 4f14 5d6 6s2',group:'transition',x:8,y:6,radius:185,electroneg:2.2,ionization:840},
  {z:77,sym:'Ir',name:'Iridio',mass:192.22,val:[3,4,6],config:'[Xe] 4f14 5d7 6s2',group:'transition',x:9,y:6,radius:180,electroneg:2.20,ionization:880},
  {z:78,sym:'Pt',name:'Platino',mass:195.08,val:[2,4],config:'[Xe] 4f14 5d9 6s1',group:'transition',x:10,y:6,radius:177,electroneg:2.28,ionization:870},
  {z:79,sym:'Au',name:'Urre',mass:196.97,val:[1,3],config:'[Xe] 4f14 5d10 6s1',group:'transition',x:11,y:6,radius:174,electroneg:2.54,ionization:890},
  {z:80,sym:'Hg',name:'Merkurio',mass:200.59,val:[1,2],config:'[Xe] 4f14 5d10 6s2',group:'transition',x:12,y:6,radius:171,electroneg:2.00,ionization:1007},
  {z:81,sym:'Tl',name:'Talio',mass:204.38,val:[1,3],config:'[Xe] 4f14 5d10 6s2 6p1',group:'post-transition',x:13,y:6,radius:156,electroneg:1.62,ionization:589},
  {z:82,sym:'Pb',name:'Berun',mass:207.2,val:[2,4],config:'[Xe] 4f14 5d10 6s2 6p2',group:'post-transition',x:14,y:6,radius:154,electroneg:1.87,ionization:716},
  {z:83,sym:'Bi',name:'Bismuto',mass:208.98,val:[3,5],config:'[Xe] 4f14 5d10 6s2 6p3',group:'post-transition',x:15,y:6,radius:143,electroneg:2.02,ionization:703},
  {z:84,sym:'Po',name:'Polonio',mass:209,val:[-2,2,4,6],config:'[Xe] 4f14 5d10 6s2 6p4',group:'metalloid',x:16,y:6,radius:135,electroneg:2.0,ionization:812},
  {z:85,sym:'At',name:'Astato',mass:210,val:[-1,1,3,5,7],config:'[Xe] 4f14 5d10 6s2 6p5',group:'halogen',x:17,y:6,radius:127,electroneg:2.2,ionization:930},
  {z:86,sym:'Rn',name:'Radon',mass:222,val:[0,2],config:'[Xe] 4f14 5d10 6s2 6p6',group:'noble',x:18,y:6,radius:120,electroneg:0,ionization:1037},
  {z:87,sym:'Fr',name:'Frantzio',mass:223,val:[1],config:'[Rn] 7s1',group:'alkali',x:1,y:7,radius:0,electroneg:0.7,ionization:380},
  {z:88,sym:'Ra',name:'Radio',mass:226,val:[2],config:'[Rn] 7s2',group:'alkaline',x:2,y:7,radius:0,electroneg:0.9,ionization:509},
  {z:104,sym:'Rf',name:'Rutherfordio',mass:267,val:[4],config:'[Rn] 5f14 6d2 7s2',group:'transition',x:4,y:7,radius:0,electroneg:0,ionization:580},
  {z:105,sym:'Db',name:'Dubnio',mass:268,val:[5],config:'[Rn] 5f14 6d3 7s2',group:'transition',x:5,y:7,radius:0,electroneg:0,ionization:0},
  {z:106,sym:'Sg',name:'Seaborgio',mass:271,val:[6],config:'[Rn] 5f14 6d4 7s2',group:'transition',x:6,y:7,radius:0,electroneg:0,ionization:0},
  {z:107,sym:'Bh',name:'Bohrio',mass:270,val:[7],config:'[Rn] 5f14 6d5 7s2',group:'transition',x:7,y:7,radius:0,electroneg:0,ionization:0},
  {z:108,sym:'Hs',name:'Hassio',mass:269,val:[6,8],config:'[Rn] 5f14 6d6 7s2',group:'transition',x:8,y:7,radius:0,electroneg:0,ionization:0},
  {z:109,sym:'Mt',name:'Meitnerio',mass:278,val:[],config:'â€”',group:'transition',x:9,y:7,radius:0,electroneg:0,ionization:0},
  {z:110,sym:'Ds',name:'Darmstadtio',mass:281,val:[],config:'â€”',group:'transition',x:10,y:7,radius:0,electroneg:0,ionization:0},
  {z:111,sym:'Rg',name:'Roentgenio',mass:282,val:[],config:'â€”',group:'transition',x:11,y:7,radius:0,electroneg:0,ionization:0},
  {z:112,sym:'Cn',name:'Kopernizio',mass:285,val:[],config:'[Rn] 5f14 6d10 7s2',group:'transition',x:12,y:7,radius:0,electroneg:0,ionization:0},
  {z:113,sym:'Nh',name:'Nihonio',mass:286,val:[],config:'[Rn] 5f14 6d10 7s2 7p1',group:'post-transition',x:13,y:7,radius:0,electroneg:0,ionization:0},
  {z:114,sym:'Fl',name:'Flerovio',mass:289,val:[],config:'â€”',group:'post-transition',x:14,y:7,radius:0,electroneg:0,ionization:0},
  {z:115,sym:'Mc',name:'Moskovio',mass:289,val:[],config:'â€”',group:'post-transition',x:15,y:7,radius:0,electroneg:0,ionization:0},
  {z:116,sym:'Lv',name:'Livermorio',mass:293,val:[],config:'â€”',group:'post-transition',x:16,y:7,radius:0,electroneg:0,ionization:0},
  {z:117,sym:'Ts',name:'Teneso',mass:294,val:[],config:'â€”',group:'halogen',x:17,y:7,radius:0,electroneg:0,ionization:0},
  {z:118,sym:'Og',name:'Oganeson',mass:294,val:[0],config:'â€”',group:'noble',x:18,y:7,radius:0,electroneg:0,ionization:0}
];

const lanthanides = [
  {z:57,sym:'La',name:'Lantano',mass:138.91,val:[3],config:'[Xe] 5d1 6s2',group:'lanthanide',x:3,radius:187,electroneg:1.1,ionization:538},
  {z:58,sym:'Ce',name:'Zerio',mass:140.12,val:[3,4],config:'[Xe] 4f1 5d1 6s2',group:'lanthanide',x:4,radius:181,electroneg:1.12,ionization:534},
  {z:59,sym:'Pr',name:'Praseodimio',mass:140.91,val:[3,4],config:'[Xe] 4f3 6s2',group:'lanthanide',x:5,radius:182,electroneg:1.13,ionization:527},
  {z:60,sym:'Nd',name:'Neodimio',mass:144.24,val:[3],config:'[Xe] 4f4 6s2',group:'lanthanide',x:6,radius:181,electroneg:1.14,ionization:533},
  {z:61,sym:'Pm',name:'Prometio',mass:145,val:[3],config:'[Xe] 4f5 6s2',group:'lanthanide',x:7,radius:183,electroneg:1.13,ionization:540},
  {z:62,sym:'Sm',name:'Samario',mass:150.36,val:[2,3],config:'[Xe] 4f6 6s2',group:'lanthanide',x:8,radius:180,electroneg:1.17,ionization:544},
  {z:63,sym:'Eu',name:'Europio',mass:151.96,val:[2,3],config:'[Xe] 4f7 6s2',group:'lanthanide',x:9,radius:199,electroneg:1.2,ionization:547},
  {z:64,sym:'Gd',name:'Gadolinio',mass:157.25,val:[3],config:'[Xe] 4f7 5d1 6s2',group:'lanthanide',x:10,radius:179,electroneg:1.2,ionization:593},
  {z:65,sym:'Tb',name:'Terbio',mass:158.93,val:[3,4],config:'[Xe] 4f9 6s2',group:'lanthanide',x:11,radius:176,electroneg:1.2,ionization:565},
  {z:66,sym:'Dy',name:'Disprosio',mass:162.50,val:[3],config:'[Xe] 4f10 6s2',group:'lanthanide',x:12,radius:175,electroneg:1.22,ionization:572},
  {z:67,sym:'Ho',name:'Holmio',mass:164.93,val:[3],config:'[Xe] 4f11 6s2',group:'lanthanide',x:13,radius:174,electroneg:1.23,ionization:581},
  {z:68,sym:'Er',name:'Erbio',mass:167.26,val:[3],config:'[Xe] 4f12 6s2',group:'lanthanide',x:14,radius:173,electroneg:1.24,ionization:589},
  {z:69,sym:'Tm',name:'Tulio',mass:168.93,val:[2,3],config:'[Xe] 4f13 6s2',group:'lanthanide',x:15,radius:172,electroneg:1.25,ionization:596},
  {z:70,sym:'Yb',name:'Iterbio',mass:173.05,val:[2,3],config:'[Xe] 4f14 6s2',group:'lanthanide',x:16,radius:194,electroneg:1.1,ionization:603},
  {z:71,sym:'Lu',name:'Lutezio',mass:174.97,val:[3],config:'[Xe] 4f14 5d1 6s2',group:'lanthanide',x:17,radius:172,electroneg:1.27,ionization:524}
];

const actinides = [
  {z:89,sym:'Ac',name:'Aktinio',mass:227,val:[3],config:'[Rn] 6d1 7s2',group:'actinide',x:3,radius:188,electroneg:1.1,ionization:499},
  {z:90,sym:'Th',name:'Torio',mass:232.04,val:[4],config:'[Rn] 6d2 7s2',group:'actinide',x:4,radius:179,electroneg:1.3,ionization:587},
  {z:91,sym:'Pa',name:'Protaktinio',mass:231.04,val:[4,5],config:'[Rn] 5f2 6d1 7s2',group:'actinide',x:5,radius:163,electroneg:1.5,ionization:568},
  {z:92,sym:'U',name:'Uranio',mass:238.03,val:[3,4,5,6],config:'[Rn] 5f3 6d1 7s2',group:'actinide',x:6,radius:156,electroneg:1.38,ionization:597},
  {z:93,sym:'Np',name:'Neptunio',mass:237,val:[3,4,5,6,7],config:'[Rn] 5f4 6d1 7s2',group:'actinide',x:7,radius:155,electroneg:1.36,ionization:604},
  {z:94,sym:'Pu',name:'Plutonio',mass=244,val:[3,4,5,6,7],config:'[Rn] 5f6 7s2',group:'actinide',x:8,radius:159,electroneg:1.28,ionization:584},
  {z:95,sym:'Am',name:'Amerizio',mass:243,val:[3,4,5,6],config:'[Rn] 5f7 7s2',group:'actinide',x:9,radius:173,electroneg:1.13,ionization:578},
  {z:96,sym:'Cm',name:'Kurio',mass:247,val:[3,4],config:'[Rn] 5f7 6d1 7s2',group:'actinide',x:10,radius:174,electroneg:1.28,ionization:581},
  {z:97,sym:'Bk',name:'Berkelio',mass:247,val:[3,4],config:'[Rn] 5f9 7s2',group:'actinide',x:11,radius:170,electroneg:1.3,ionization:601},
  {z:98,sym:'Cf',name:'Kalifornio',mass:251,val:[3],config:'[Rn] 5f10 7s2',group:'actinide',x:12,radius:186,electroneg:1.3,ionization:608},
  {z:99,sym:'Es',name:'Einsteinio',mass:252,val:[3],config:'[Rn] 5f11 7s2',group:'actinide',x:13,radius:186,electroneg:1.3,ionization:619},
  {z:100,sym:'Fm',name:'Fermio',mass:257,val:[3],config:'[Rn] 5f12 7s2',group:'actinide',x:14,radius:0,electroneg:1.3,ionization:627},
  {z:101,sym:'Md',name:'Mendelevio',mass:258,val:[2,3],config:'[Rn] 5f13 7s2',group:'actinide',x:15,radius:0,electroneg:1.3,ionization:635},
  {z:102,sym:'No',name:'Nobelio',mass:259,val:[2,3],config:'[Rn] 5f14 7s2',group:'actinide',x:16,radius:0,electroneg:1.3,ionization:642},
  {z:103,sym:'Lr',name:'Lawrentzio',mass:266,val:[3],config:'[Rn] 5f14 7s2 7p1',group:'actinide',x:17,radius:0,electroneg:0,ionization:470}
];

/* ---------- RENDER ---------- */
const table = document.getElementById('table');
const lanthanidesContainer = document.getElementById('lanthanides');
const actinidesContainer = document.getElementById('actinides');
const searchInput = document.getElementById('searchInput');
const elecToggleBtn = document.getElementById('elecToggleBtn');
const electronegToggleBtn = document.getElementById('electronegToggleBtn');
const radiusToggleBtn = document.getElementById('radiusToggleBtn');
const ionizationToggleBtn = document.getElementById('ionizationToggleBtn');
const resourcesToggle = document.getElementById('resourcesToggle');
const propertiesToggle = document.getElementById('propertiesToggle');
const trendArrows = document.getElementById('trendArrows');
const radiusTitle = document.querySelector('.radius-legend-title');
const electronegTitle = document.querySelector('.electroneg-legend-title');
const ionizationTitle = document.querySelector('.ionization-legend-title');
const btn3D = document.getElementById('btn3D');
const btnBalents = document.getElementById('btnBalents');
const btnCompounds = document.getElementById('btnCompounds');
const btnCalc = document.getElementById('btnCalc');

let allCells = [];
let groupLabels = [];
let periodLabels = [];
let isElecConfigMode = false;
let isElectronegMode = false;
let isRadiusMode = false;
let isIonizationMode = false;

/* --- FUNCIONES AUX --- */
function groupClass(g) {
  return g;
}

function createTableLegend() {
  const legend = document.createElement('div');
  legend.className = 'table-legend';
  const items = [
    {color: '#FFB6C1', text: 'Metal Alkalinoak', group: 'alkali'},
    {color: '#FFD8B1', text: 'Metal Lurralkalinoak', group: 'alkaline'},
    {color: '#B0E0E6', text: 'Trantsizio Metalak', group: 'transition'},
    {color: '#E6E6FA', text: 'Beste metalak', group: 'post-transition'},
    {color: '#98FB98', text: 'Metaloideak', group: 'metalloid'},
    {color: '#F0E68C', text: 'Ez-metalak', group: 'nonmetal'},
    {color: '#FFDEAD', text: 'Halogenoak', group: 'halogen'},
    {color: '#DDA0DD', text: 'Gas nobleak', group: 'noble'},
    {color: '#C9E4DE', text: 'Lantanoideak', group: 'lanthanide'},
    {color: '#D8BFD8', text: 'Aktinoideak', group: 'actinide'}
  ];
  items.forEach(item => {
    const div = document.createElement('div');
    div.className = 'table-legend-item';
    div.dataset.group = item.group;
    div.innerHTML = `<div class="sw" style="background:${item.color}"></div><span>${item.text}</span>`;
    div.addEventListener('mouseenter', () => {
      allCells.forEach(c => {
        if (c.classList.contains(item.group)) c.classList.add('highlighted');
        else c.classList.add('dimmed');
      });
    });
    div.addEventListener('mouseleave', () => {
      allCells.forEach(c => {
        c.classList.remove('highlighted', 'dimmed');
      });
    });
    legend.appendChild(div);
  });
  table.appendChild(legend);
}

function show(el, cell) {
  const icon = document.getElementById('iconSquare');
  const title = document.getElementById('titleMain');
  const subtitle = document.getElementById('subtitle');
  title.innerHTML = `<a href="https://eu.wikipedia.org/wiki/${encodeURIComponent(el.name)}" target="_blank" class="element-name-link">${el.name}</a>`;
  subtitle.textContent = `Z = ${el.z}`;
  document.getElementById('iz').textContent = el.z;
  document.getElementById('imass').textContent = el.mass ? el.mass + ' u' : 'â€”';
  document.getElementById('ival').textContent = (el.val && el.val.length) ? el.val.join(', ') : 'â€”';
  document.getElementById('iconfig').textContent = el.config || 'â€”';
  document.getElementById('ielectroneg').textContent = el.electroneg > 0 ? el.electroneg.toFixed(2) : 'Ezezaguna';
  document.getElementById('iradius').textContent = el.radius > 0 ? el.radius + ' pm' : 'Ezezaguna';
  document.getElementById('iionization').textContent = el.ionization > 0 ? el.ionization + ' kJ/mol' : 'Ezezaguna';
  const style = window.getComputedStyle(cell);
  icon.style.background = style.backgroundColor || '#222';
  icon.textContent = el.sym;
}

/* --- RENDER TABLA --- */
elements.forEach(el => {
  const d = document.createElement('div');
  d.className = 'cell ' + groupClass(el.group);
  d.style.gridColumn = el.x;
  d.style.gridRow = el.y;
  d.dataset.z = el.z;
  d.dataset.group = el.group;
  d.dataset.period = el.y;
  d.innerHTML = `<div style="display:flex;justify-content:space-between"><div class='num'>${el.z}</div></div><div style="text-align:center;margin-top:4px"><div class='sym'>${el.sym}</div><div class='ename'>${el.name}</div></div>`;
  d.addEventListener('click', () => show(el, d));
  table.appendChild(d);
  allCells.push(d);
});

createTableLegend();

/* --- LANTANIDES & ACTINIDES --- */
lanthanides.forEach(el => {
  const d = document.createElement('div');
  d.className = 'cell ' + groupClass(el.group);
  d.style.gridColumn = el.x - 2;
  d.dataset.z = el.z;
  d.dataset.group = el.group;
  d.dataset.period = 6;
  d.innerHTML = `<div style="display:flex;justify-content:space-between"><div class='num'>${el.z}</div></div><div style="text-align:center;margin-top:4px"><div class='sym'>${el.sym}</div><div class='ename'>${el.name}</div></div>`;
  d.addEventListener('click', () => show(el, d));
  lanthanidesContainer.appendChild(d);
  allCells.push(d);
});

actinides.forEach(el => {
  const d = document.createElement('div');
  d.className = 'cell ' + groupClass(el.group);
  d.style.gridColumn = el.x - 2;
  d.dataset.z = el.z;
  d.dataset.group = el.group;
  d.dataset.period = 7;
  d.innerHTML = `<div style="display:flex;justify-content:space-between"><div class='num'>${el.z}</div></div><div style="text-align:center;margin-top:4px"><div class='sym'>${el.sym}</div><div class='ename'>${el.name}</div></div>`;
  d.addEventListener('click', () => show(el, d));
  actinidesContainer.appendChild(d);
  allCells.push(d);
});

/* --- SEARCH --- */
searchInput.addEventListener('input', () => {
  const term = searchInput.value.toLowerCase().trim();
  allCells.forEach(cell => {
    const z = parseInt(cell.dataset.z);
    let el = elements.find(e => e.z === z) || lanthanides.find(e => e.z === z) || actinides.find(e => e.z === z);
    if (!el) return;
    const match = el.name.toLowerCase().includes(term) || el.sym.toLowerCase().includes(term) || el.z.toString().includes(term);
    cell.classList.remove('search-match', 'search-nomatch');
    if (term === '') return;
    if (match) cell.classList.add('search-match');
    else cell.classList.add('search-nomatch');
  });
});

/* --- ZOOM --- */
let zoomLevel = 0.75;
function updateZoom() {
  document.documentElement.style.setProperty('--zoom-level', zoomLevel);
  document.getElementById('zoomLevel').textContent = Math.round(zoomLevel * 100) + '%';
}
document.getElementById('zoomIn').addEventListener('click', () => { if (zoomLevel < 2) { zoomLevel += 0.05; updateZoom(); } });
document.getElementById('zoomOut').addEventListener('click', () => { if (zoomLevel > 0.5) { zoomLevel -= 0.05; updateZoom(); } });
document.getElementById('zoomReset').addEventListener('click', () => { zoomLevel = 0.75; updateZoom(); });
updateZoom();

/* --- TEMA --- */
const themeToggle = document.getElementById('themeToggle');
const html = document.documentElement;
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');

function applyTheme(dark) {
  html.setAttribute('data-theme', dark ? 'dark' : 'light');
  localStorage.setItem('theme', dark ? 'dark' : 'light');
}

const saved = localStorage.getItem('theme');
if (saved) applyTheme(saved === 'dark');
else applyTheme(prefersDark.matches);

prefersDark.addEventListener('change', e => {
  if (!localStorage.getItem('theme')) applyTheme(e.matches);
});

themeToggle.addEventListener('click', () => {
  const isDark = html.getAttribute('data-theme') !== 'light';
  applyTheme(!isDark);
});

/* --- MENU TOGGLE --- */
resourcesToggle.addEventListener('click', e => {
  if (e.target.closest('.resources-header') || e.target === resourcesToggle) {
    resourcesToggle.classList.toggle('active');
  }
});

propertiesToggle.addEventListener('click', e => {
  if (e.target.closest('.properties-header') || e.target === propertiesToggle) {
    propertiesToggle.classList.toggle('active');
  }
});

/* --- EXTERNAL LINKS --- */
btn3D.addEventListener('click', () => window.open('https://mikelikoptero.github.io/Orbitalak3D/', '_blank'));
btnBalents.addEventListener('click', () => window.open('https://mikelikoptero.github.io/Balentzien-Taula/', '_blank'));
btnCompounds.addEventListener('click', () => window.open('https://mikelikoptero.github.io/KonposatuInorganikoak/', '_blank'));
btnCalc.addEventListener('click', () => window.open('https://mikelikoptero.github.io/Kalkulagailua/', '_blank'));

/* --- INICIO --- */
show(elements[0], allCells[0]);
</script>
</body>
</html>
